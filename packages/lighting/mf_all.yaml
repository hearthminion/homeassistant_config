---
# ==================================================================================================
#
# Input Select
#
# ==================================================================================================
input_select:
  mf_all_lights_scene:
    name: "MF: All Lights - Scenes"
    options:
      - scene.mf_all_bright
      - scene.mf_all_candle
      - scene.mf_all_concentrate
      - scene.mf_all_darken
      - scene.mf_all_dimmed
      - scene.mf_all_energize
      - scene.mf_all_fireplace
      - scene.mf_all_homeassistant
      - scene.mf_all_migraine
      - scene.mf_all_nightlight
      - scene.mf_all_read
      - scene.mf_all_relax
      - scene.mf_all_dynamic

  mf1_all_lights_scene:
    name: "MF1: All Lights - Scenes"
    options:
      - scene.mf1_all_bright
      - scene.mf1_all_candle
      - scene.mf1_all_concentrate
      - scene.mf1_all_darken
      - scene.mf1_all_dimmed
      - scene.mf1_all_energize
      - scene.mf1_all_fireplace
      - scene.mf1_all_homeassistant
      - scene.mf1_all_migraine
      - scene.mf1_all_nightlight
      - scene.mf1_all_read
      - scene.mf1_all_relax
      - scene.mf1_all_dynamic

  mf2_all_lights_scene:
    name: "MF2: All Lights - Scenes"
    options:
      - scene.mf2_all_bright
      - scene.mf2_all_candle
      - scene.mf2_all_concentrate
      - scene.mf2_all_darken
      - scene.mf2_all_dimmed
      - scene.mf2_all_energize
      - scene.mf2_all_fireplace
      - scene.mf2_all_homeassistant
      - scene.mf2_all_migraine
      - scene.mf2_all_nightlight
      - scene.mf2_all_read
      - scene.mf2_all_relax
      - scene.mf2_all_dynamic


# ==================================================================================================
#
# Input Text
#
# ==================================================================================================
input_text:
  mf1_all_scene_homeassistant:
    min: 36
    max: 36

# ==================================================================================================
#
# Lights
#
# ==================================================================================================
light:
  - platform: group
    unique_id: "1062582c-9e65-4d77-9f94-1b6488f6b6ff"
    name: "MF: All"
    entities:
      - light.mf1_all
      - light.mf2_all

  - platform: template
    lights:
      mf_all_alt:
        friendly_name: "MF: All (Alt)"
        unique_id: "aeda1528-cd29-466f-96f0-1f9650fb82ad"
        value_template: "{{ is_state('light.mf_all', 'on') }}"
        level_template: "{{ state_attr('light.mf_all','brightness') | int(255) }}"
        temperature_template: "{{ state_attr('light.mf_all','color_temp') | int(367) }}"
        color_template: "{{ state_attr('light.mf_all','hs_color') }}"
        min_mireds_template: "{{ state_attr('light.mf_all','min_mireds') | int(100) }}"
        max_mireds_template: "{{ state_attr('light.mf_all','max_mireds') | int(500) }}"
        #effect_list_template: "{{ state_attr('light.mf_all', 'effect_list') }}"
        turn_on:
          service: scene.turn_on
          data_template:
            entity_id: >
              {{ states('input_select.mf_all_scene') }}
        turn_off:
          service: light.turn_off
          target:
            entity_id: light.mf_all
        set_level:
          service: light.turn_on
          target:
            entity_id: light.mf_all
          data:
            brightness: "{{ brightness }}"
        set_temperature:
          service: light.turn_on
          target:
            entity_id: light.mf_all
          data:
            color_temp: "{{ color_temp }}"
        set_color:
          service: light.turn_on
          target:
            entity_id: light.mf_all
          data:
            hs_color:
              - "{{ hs[0] }}"
              - "{{ hs[1] }}"
        # set_effect:
        #   - service: light.turn_on
        #     data_template:
        #       - light.mf_all
        #     effect: "{{ effect }}"
        supports_transition_template: "{{ true }}"

  - platform: template
    lights:
      mf1_all_alt:
        friendly_name: "MF1: All (Alt)"
        unique_id: "68b6cf5d-c602-417a-9505-384378766f6a"
        value_template: "{{ is_state('light.mf1_all', 'on') }}"
        level_template: "{{ state_attr('light.mf1_all','brightness') | int(255) }}"
        temperature_template: "{{ state_attr('light.mf1_all','color_temp') | int(367) }}"
        color_template: "{{ state_attr('light.mf1_all','hs_color') }}"
        min_mireds_template: "{{ state_attr('light.mf1_all','min_mireds') | int(100) }}"
        max_mireds_template: "{{ state_attr('light.mf1_all','max_mireds') | int(500) }}"
        #effect_list_template: "{{ state_attr('light.mf1_all', 'effect_list') }}"
        turn_on:
          service: scene.turn_on
          data_template:
            entity_id: >
              {{ states('input_select.mf1_all_scene') }}
        turn_off:
          service: light.turn_off
          target:
            entity_id: light.mf1_all
        set_level:
          service: light.turn_on
          target:
            entity_id: light.mf1_all
          data:
            brightness: "{{ brightness }}"
        set_temperature:
          service: light.turn_on
          target:
            entity_id: light.mf1_all
          data:
            color_temp: "{{ color_temp }}"
        set_color:
          service: light.turn_on
          target:
            entity_id: light.mf1_all
          data:
            hs_color:
              - "{{ hs[0] }}"
              - "{{ hs[1] }}"
        # set_effect:
        #   - service: light.turn_on
        #     data_template:
        #       - light.mf1_all
        #     effect: "{{ effect }}"
        supports_transition_template: "{{ true }}"

  - platform: template
    lights:
      mf2_all_alt:
        friendly_name: "MF2: All (Alt)"
        unique_id: "20c2a40f-b850-4b6f-ac92-118dadbd3aed"
        value_template: "{{ is_state('light.mf2_all', 'on') }}"
        level_template: "{{ state_attr('light.mf2_all','brightness') | int(255) }}"
        temperature_template: "{{ state_attr('light.mf2_all','color_temp') | int(367) }}"
        color_template: "{{ state_attr('light.mf2_all','hs_color') }}"
        min_mireds_template: "{{ state_attr('light.mf2_all','min_mireds') | int(100) }}"
        max_mireds_template: "{{ state_attr('light.mf2_all','max_mireds') | int(500) }}"
        #effect_list_template: "{{ state_attr('light.mf2_all', 'effect_list') }}"
        turn_on:
          service: scene.turn_on
          data_template:
            entity_id: >
              {{ states('input_select.mf2_all_scene') }}
        turn_off:
          service: light.turn_off
          target:
            entity_id: light.mf2_all
        set_level:
          service: light.turn_on
          target:
            entity_id: light.mf2_all
          data:
            brightness: "{{ brightness }}"
        set_temperature:
          service: light.turn_on
          target:
            entity_id: light.mf2_all
          data:
            color_temp: "{{ color_temp }}"
        set_color:
          service: light.turn_on
          target:
            entity_id: light.mf2_all
          data:
            hs_color:
              - "{{ hs[0] }}"
              - "{{ hs[1] }}"
        # set_effect:
        #   - service: light.turn_on
        #     data_template:
        #       - light.mf2_all
        #     effect: "{{ effect }}"
        supports_transition_template: "{{ true }}"

# ==================================================================================================
#
# Rest Command
#
# ==================================================================================================
rest_command:
  # ================================================================================================
  #
  # Bedroom1 Light IDs:
  # - name: MF1: Bedroom1 CF1 Bulb1
  #   id: 2fb5f88c-d173-4d81-87de-4c3b03c9a75e
  # - name: MF1: Bedroom1 Lamp1 Bulb1
  #   id: 879c70e6-8212-452b-bda5-659943158edb
  # - name: MF1: Bedroom1 Lamp1 Bulb2
  #   id: 0bdf5862-6217-4ab3-b9d3-bed4daf06f7c
  # - name: MF1: Bedroom1 Lamp2 Bulb1
  #   id: e7e3a4b4-c9ac-4841-929f-7330da707855
  # - name: MF1: Bedroom1 Lamp2 Bulb2
  #   id: b71eb26f-4d78-404a-a51a-49043497b63c
  #
  # Bathroom1 Light IDs:
  # - name: MF1: Bathroom1 (Inner) CF1 Bulb1
  #   id: b2c73c00-1188-4f93-a23e-0267cc038594
  # - name: MF1: Bathroom1 (Inner) CF1 Bulb2
  #   id: 3f9a6d23-d966-4ccc-a6d1-39bbcdfd1080
  # - name: MF1: Bathroom1 (Inner) CF1 Bulb3
  #   id: d1577871-2836-45c4-bbd9-de9423d526f5
  # - name: MF1: Bathroom1 (Outer) CF1 Bulb1
  #   id:
  #
  # Bathroom2 Light IDs:
  # - name: MF1: Bathroom CF1 Bulb1
  #   id: 272dd946-6baa-466c-9ba4-e0ce5c9de6ee
  # - name: MF1: Bathroom2 CF1 Bulb2
  #   id: d4e55d74-d520-48c8-af6b-45b9fe46075f
  # - name: MF1: Bathroom2 CF1 Bulb3
  #   id: 285a8ccc-3b03-4bb1-95ad-da94ea5ddd30
  #
  # Hallway Light IDs:
  # - name: MF1: Hallway CF1 Bulb1
  #   id: 0a6f4c2e-2864-4a97-bffe-24f629b7008e
  # - name: MF1: Hallway CF1 Bulb2
  #   id: f8ca7348-2fdc-4351-b554-85e776159c8f
  # - name: MF1: Hallway CF2 Bulb1
  #   id: 67647900-2f25-4d2d-965a-3fac2ef7b044
  # - name: MF1: Hallway CF2 Bulb2
  #   id: 264f5ee8-6cd0-4b5e-b1a8-3af7b07de307
  # - name: MF1: Hallway Lamp1 Bulb1
  #   id: 82416e7b-27a5-4ed2-a44b-3496bfed62a9
  #
  # ================================================================================================
  light_update_mf1_all_scene:
    url: "https://hue1.iot.home/clip/v2/resource/scene/{{ scene_id }}"
    method: put
    headers:
      hue-application-key: "{{ username }}"
    payload: '{
          "id":"{{ scene_id }}",
          "actions":[
          {
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"285a8ccc-3b03-4bb1-95ad-da94ea5ddd30","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"2fb5f88c-d173-4d81-87de-4c3b03c9a75e","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"272dd946-6baa-466c-9ba4-e0ce5c9de6ee","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"0a6f4c2e-2864-4a97-bffe-24f629b7008e","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"b2c73c00-1188-4f93-a23e-0267cc038594","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"3f9a6d23-d966-4ccc-a6d1-39bbcdfd1080","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"e7e3a4b4-c9ac-4841-929f-7330da707855","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"67647900-2f25-4d2d-965a-3fac2ef7b044","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"f8ca7348-2fdc-4351-b554-85e776159c8f","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"264f5ee8-6cd0-4b5e-b1a8-3af7b07de307","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"879c70e6-8212-452b-bda5-659943158edb","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"d1577871-2836-45c4-bbd9-de9423d526f5","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"d4e55d74-d520-48c8-af6b-45b9fe46075f","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"0bdf5862-6217-4ab3-b9d3-bed4daf06f7c","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"b71eb26f-4d78-404a-a51a-49043497b63c","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"fa761fe2-c6e6-4d58-a71c-59f76f54b504","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"82416e7b-27a5-4ed2-a44b-3496bfed62a9","rtype":"light"}
          }
          ]
          }'
    verify_ssl: false
    content_type: "application/json"

  # ================================================================================================
  #
  # Den Light IDs:
  # - name: MF2: Den Lamp1 Bulb1
  #   01: 190b3db6-e782-429e-8fdf-7de7f6278841
  # - name: MF2: Den Lamp2 Bulb1
  #   03: 0d02f9bf-ce16-4eed-9795-20e5c4c2b33d
  # - name: MF2: Den Lamp3 Bulb1
  #   02: b9697269-320a-460d-8458-62efe5cadf62
  # - name: MF2: Den Lamp5 Bulb1
  #   02: 9ebd6fac-a79f-4499-bf65-4833404c2386
  #
  # ================================================================================================
  light_update_mf2_all_scene:
    url: "https://hue3.iot.home/clip/v2/resource/scene/{{ scene_id }}"
    method: put
    headers:
      hue-application-key: "{{ username }}"
    payload: '{
          "id":"{{ scene_id }}",
          "actions":[
          {
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"e1becc60-2dea-4b73-9578-ea56d7340d30","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"f45e5a8d-931c-435d-bc41-8dd0e8fa6682","rtype":"light"}
          },{
          "action":{ {{ color }},{{ brightness }},{{ on_state }} },
          "target":{"rid":"941df8c2-1308-4746-8c22-e9f65faa450a","rtype":"light"}
          }
          ]
          }'
    verify_ssl: false
    content_type: "application/json"
